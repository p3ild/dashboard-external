<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    CONTENT CUSTOM
    <div id="output"></div>
    <script>

        $(document).ready(function () {
            console.log('ready', dhis2)
        });

        window.document.addEventListener('ireportInjected', function (event) {
            //on data ireport injected (Ready)
            console.log("ireportInjected::  window?.ireport:", window?.ireport)
            console.log("event.detail", event.detail);
            /**
                         * output:
                         {"orgUnit":"LOdti1gATwC","period":{"dhis2Period":"2022","endDate":"2022-12-31","periodName":"2022","periodType":"Yearly","startDate":"2022-01-01","year":"2022"},"reload":"Mon Apr 08 2024 17:06:06 GMT+0700 (Indochina Time)"}
                        */
            main();
        });



        function main() {
            var message = JSON.stringify(window?.dhis2);
            document.getElementById("output").innerHTML = message;

            setTimeout(() => {
                const htmlString = `
                <tr>
                <td>
                    data3
                </td>
                <td>
                    data4
                </td>
            </tr>
                `;
                const bodyElement = $('#data-table body');

                bodyElement.append(htmlString)
            }, 5000)
        }

    </script>

    <table id="data-table" style="border:1px solid black; width: 100vw;">
        <thead>
            <tr>
                <th>col1</th>
                <th>col2</th>
            </tr>
        </thead>

        <body>
            <tr>
                <td>
                    data1
                </td>
                <td>
                    data2
                </td>
            </tr>
        </body>
    </table>
</body>

</html>